# Pipeline: IOR Container Test
# Purpose: Test IOR deployment using Docker/Podman containers
# Requirements: Docker or Podman installed, shared filesystem access
# Expected Runtime: 2-5 minutes

name: ior_container_test

# Auto-build environment from current shell
# No env field - will capture current environment automatically

# Container configuration
container_build: ior_test_container
container_engine: docker
container_base: iowarp/iowarp-build:latest

pkgs:
  # IOR benchmark with container deployment
  - pkg_type: builtin.ior
    pkg_name: ior_container
    # Deployment mode: 'default' for bare metal, 'container' for containerized
    deploy_mode: container
    # IOR benchmark parameters
    nprocs: 2
    ppn: 2
    block: 1G
    xfer: 1M
    api: posix
    out: /tmp/ior_test_file
    log: /tmp/ior_output.log
    write: true
    read: true
    fpp: false
    reps: 1
    direct: false
